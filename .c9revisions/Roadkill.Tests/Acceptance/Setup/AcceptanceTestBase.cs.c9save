{"ts":1354889191029,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"ï»¿using System.IO;\r\nusing NUnit.Framework;\r\nusing OpenQA.Selenium;\r\n\r\nnamespace Roadkill.Tests.Acceptance\r\n{\r\n\tpublic abstract class AcceptanceTestBase\r\n\t{\r\n\t\tprotected static readonly string ADMIN_EMAIL = \"admin@localhost\";\r\n\t\tprotected static readonly string ADMIN_PASSWORD = \"password\";\r\n\r\n\t\tprotected static readonly string EDITOR_EMAIL = \"editor@localhost\";\r\n\t\tprotected static readonly string EDITOR_PASSWORD = \"password\";\r\n\t\tprotected string SitePath;\r\n\r\n\t\tprotected IWebDriver Driver;\r\n\t\tprotected string LoginUrl;\r\n\t\tprotected string BaseUrl;\r\n\t\tprotected string LogoutUrl;\r\n\r\n\t\t[SetUp]\r\n\t\tpublic void BeforeEachTextFixture()\r\n\t\t{\r\n\t\t\tCopyDb();\r\n\t\t\tBaseUrl = \"http://localhost:9876\";\r\n\t\t\tLoginUrl = BaseUrl + \"/user/login\";\r\n\t\t\tLogoutUrl = BaseUrl + \"/user/logout\";\r\n\t\t\tDriver = AcceptanceTestsSetup.Driver;\r\n\t\t}\r\n\r\n\t\tprivate void CopyDb()\r\n\t\t{\r\n\t\t\tSitePath = AcceptanceTestsSetup.GetSitePath();\r\n\t\t\tstring libFolder = Path.Combine(SitePath, \"..\", \"lib\");\r\n\t\t\tlibFolder = new DirectoryInfo(libFolder).FullName;\r\n\r\n\t\t\tstring testsDBPath = Path.Combine(libFolder, \"Empty-databases\", \"roadkill-acceptancetests.sdf\");\r\n\t\t\tFile.Copy(testsDBPath, Path.Combine(SitePath, \"App_Data\", \"roadkill-acceptancetests.sdf\"), true);\r\n\t\t}\r\n\r\n\t\tprotected void CreatePageWithTags(string title = \"My title\", params string[] tags)\r\n\t\t{\r\n\t\t\tDriver.FindElement(By.CssSelector(\"a[href='/pages/new']\")).Click();\r\n\t\t\tDriver.FindElement(By.Name(\"Title\")).SendKeys(title);\r\n\t\t\t//Driver.FindElement(By.Name(\"RawTags\")).SendKeys(\"Tag1,Tag2\");\r\n\r\n\t\t\tforeach (string tag in tags)\r\n\t\t\t{\r\n\t\t\t\tDriver.FindElement(By.Name(\"TagsEntry\")).SendKeys(tag);\r\n\t\t\t\tDriver.FindElement(By.Name(\"TagsEntry\")).SendKeys(Keys.Space);\r\n\t\t\t}\r\n\r\n\t\t\tDriver.FindElement(By.Name(\"Content\")).SendKeys(\"Some content goes here\");\r\n\t\t\tDriver.FindElement(By.CssSelector(\"input[value=Save]\")).Click();\r\n\t\t}\r\n\r\n\t\tprotected void LoginAsAdmin()\r\n\t\t{\r\n\t\t\tDriver.Navigate().GoToUrl(LoginUrl);\r\n\t\t\tDriver.FindElement(By.Name(\"email\")).SendKeys(ADMIN_EMAIL);\r\n\t\t\tDriver.FindElement(By.Name(\"password\")).SendKeys(ADMIN_PASSWORD);\r\n\t\t\tDriver.FindElement(By.CssSelector(\"input[value=Login]\")).Click();\r\n\t\t}\r\n\r\n\t\tprotected void LoginAsEditor()\r\n\t\t{\r\n\t\t\tDriver.Navigate().GoToUrl(LoginUrl);\r\n\t\t\tDriver.FindElement(By.Name(\"email\")).SendKeys(EDITOR_EMAIL);\r\n\t\t\tDriver.FindElement(By.Name(\"password\")).SendKeys(EDITOR_PASSWORD);\r\n\t\t\tDriver.FindElement(By.CssSelector(\"input[value=Login]\")).Click();\r\n\t\t}\r\n\r\n\t\tprotected void Logout()\r\n\t\t{\r\n\t\t\tDriver.Navigate().GoToUrl(LogoutUrl);\r\n\t\t}\r\n\t}\r\n}\r\n"]],"start1":0,"start2":0,"length1":0,"length2":2523}]],"length":2523}
