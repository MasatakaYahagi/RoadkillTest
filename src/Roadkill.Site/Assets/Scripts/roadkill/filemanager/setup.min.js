var Roadkill;(function(n){(function(n){(function(n){var t=function(){function t(){}return t.configure=function(){var t,i;this.initializeImagePreview(),this.initializeFileUpload(),t=new n.ButtonEvents,t.bind(),i=new n.TableEvents,i.bind(),n.TableEvents.update("")},t.initializeImagePreview=function(){var n=20,t=20;$("table#files tr[data-itemtype=file]").live("mouseenter",function(i){var u,r;(u=$("td.filetype",this).text(),u.search(/^(jpg|png|gif)$/i)!=-1)&&(r=ROADKILL_ATTACHMENTSPATH+this.getCurrentPath()+"/",r=r.replace("//","/")+$("td.file",this).text(),$("body").append("<p id='image-preview'><img src='"+r+"' alt='Image Preview' /><\/p>"),$("#image-preview").css("top",i.pageY-n+"px").css("left",i.pageX+t+"px").fadeIn("fast"))}).live("mouseleave",function(){$("#image-preview").remove()}).live("mousemove",function(i){$("#preview").css("top",i.pageY-n+"px").css("left",i.pageX+t+"px")})},t.initializeFileUpload=function(){$("#fileupload").fileupload({dropZone:$("#folder-container"),pasteZone:$("body"),dataType:"json",progressall:function(n,t){var i=t.loaded/t.total*100+"",r=parseInt(i,10);$("#progress .bar").css("width",r+"%")},done:function(n,t){if(t.result.status=="error"){alert(t.result.message);return}$.each(t.result.files,function(n,t){$("#files").append(this._navigator.getFileRowHtml(t))}),setTimeout(function(){$("#progress div.bar").css("width","0%")},2e3)}}).bind("fileuploaddrop",function(){this._navigator.setCurrentPath()})},t}();n.Setup=t})(n.FileManager||(n.FileManager={}));var t=n.FileManager})(n.Site||(n.Site={}));var t=n.Site})(Roadkill||(Roadkill={}))