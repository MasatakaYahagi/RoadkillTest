var Roadkill;(function(n){(function(n){$(document).ready(function(){var i=new n.WysiwygEditor;i.bindEvents(),t.bindPreviewButton()});var t=function(){function t(){}return t.initializeTagManager=function(n){$("#TagsEntry").typeahead({}),$("#TagsEntry").tagsManager({prefilled:n,preventSubmitOnEnter:!0,typeahead:!0,typeaheadAjaxSource:ROADKILL_TAGAJAXURL,blinkBGColor_1:"#FFFF9C",blinkBGColor_2:"#CDE69C",delimeters:[59,186,32],hiddenTagListName:"RawTags"})},t.bindPreviewButton=function(){$(".previewButton").click(function(){t.showPreview()})},t.showPreview=function(){$("#previewLoading").show();var i=$("#Content").val(),t=$.ajax({type:"POST",url:ROADKILL_PREVIEWURL,data:{id:i},cache:!1,dataType:"text"});t.done(function(n){$("#preview").html(n)}),t.fail(function(n,t,i){$("#preview").html("<span style='color:red'>An error occurred with the preview: "+i+"<\/span>")}),t.always(function(){$("#previewLoading").show(),n.Dialogs.openFullScreenModal("#previewContainer"),$("#previewLoading").hide()})},t}();n.EditPage=t})(n.Site||(n.Site={}));var t=n.Site})(Roadkill||(Roadkill={}))